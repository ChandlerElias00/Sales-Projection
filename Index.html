<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Amigo Hixson – Partner Financial Story</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    /* Small polish for number inputs */
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }
  </style>
</head>
<body class="bg-slate-950 text-slate-100">
  <!-- Sticky Header -->
  <header class="sticky top-0 backdrop-blur bg-slate-950/70 border-b border-slate-800 z-50">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="text-lg md:text-xl font-semibold tracking-tight">Amigo Hixson • Financial Story</div>
      <nav class="space-x-3 text-sm">
        <a href="#past" class="hover:text-white text-slate-300">Past</a>
        <a href="#present" class="hover:text-white text-slate-300">Present</a>
        <a href="#future" class="hover:text-white text-slate-300">Future</a>
        <a href="#assumptions" class="hover:text-white text-slate-300">Assumptions</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="max-w-7xl mx-auto px-4 py-8 md:py-12">
    <div class="grid md:grid-cols-5 gap-6 items-center">
      <div class="md:col-span-3">
        <h1 class="text-2xl md:text-4xl font-bold leading-tight">
          Where we have been. Where we are. Where distributions resume.
        </h1>
        <p class="mt-3 text-slate-300 md:text-lg">
          This page shows actual performance, current run rate, and a simple plan to restart partner distributions. 
          Numbers are placeholders you can swap for live exports. 
          The model updates when you tweak the assumptions panel.
        </p>
      </div>
      <div class="md:col-span-2">
        <div class="rounded-2xl border border-slate-800 bg-slate-900 p-4">
          <div class="text-sm text-slate-300">Status</div>
          <div class="mt-1 text-xl font-semibold" id="statusBadge">On path to resume with growth</div>
          <div class="mt-3 grid grid-cols-2 gap-3">
            <div class="rounded-xl bg-slate-800 p-3">
              <div class="text-xs text-slate-400">YTD Sales</div>
              <div class="text-lg font-semibold" id="kpiYtdSales">$0</div>
            </div>
            <div class="rounded-xl bg-slate-800 p-3">
              <div class="text-xs text-slate-400">YTD Profit</div>
              <div class="text-lg font-semibold" id="kpiYtdProfit">$0</div>
            </div>
            <div class="rounded-xl bg-slate-800 p-3">
              <div class="text-xs text-slate-400">Cash for Distributions</div>
              <div class="text-lg font-semibold" id="kpiDistPool">$0</div>
            </div>
            <div class="rounded-xl bg-slate-800 p-3">
              <div class="text-xs text-slate-400">Forecast Resume Month</div>
              <div class="text-lg font-semibold" id="kpiResumeMonth">TBD</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Past -->
  <section id="past" class="max-w-7xl mx-auto px-4 py-8 md:py-12">
    <h2 class="text-xl md:text-2xl font-bold">Past</h2>
    <p class="mt-2 text-slate-300">
      Historical sales with profit and expense trend. This is the why behind delayed distributions. 
      When profit was thin, cash stayed in operations to cover payroll, food, and vendor terms.
    </p>
    <div class="mt-4 grid md:grid-cols-4 gap-4">
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">Last Year Sales</div>
        <div class="text-2xl font-semibold" id="pastSalesTotal">$0</div>
      </div>
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">Last Year Profit</div>
        <div class="text-2xl font-semibold" id="pastProfitTotal">$0</div>
      </div>
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">Profit Margin</div>
        <div class="text-2xl font-semibold" id="pastMargin">0%</div>
      </div>
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">Cash Held For Ops</div>
        <div class="text-2xl font-semibold" id="pastOpsHold">$0</div>
      </div>
    </div>
    <div class="mt-6 rounded-2xl bg-slate-900 border border-slate-800 p-4">
      <canvas id="pastChart" height="100"></canvas>
    </div>
  </section>

  <!-- Present -->
  <section id="present" class="max-w-7xl mx-auto px-4 py-8 md:py-12">
    <h2 class="text-xl md:text-2xl font-bold">Present</h2>
    <p class="mt-2 text-slate-300">
      Current month pace and spend. If we hold this pace and protect margin, cash for distributions begins to build.
    </p>
    <div class="mt-4 grid md:grid-cols-4 gap-4">
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">This Month Sales Pace</div>
        <div class="text-2xl font-semibold" id="presentSales">$0</div>
      </div>
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">This Month Profit Pace</div>
        <div class="text-2xl font-semibold" id="presentProfit">$0</div>
      </div>
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">Expense Ratio</div>
        <div class="text-2xl font-semibold" id="presentExpenseRatio">0%</div>
      </div>
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">Break Even Sales</div>
        <div class="text-2xl font-semibold" id="presentBreakeven">$0</div>
      </div>
    </div>
    <div class="mt-6 rounded-2xl bg-slate-900 border border-slate-800 p-4">
      <canvas id="presentChart" height="100"></canvas>
    </div>
  </section>

  <!-- Future -->
  <section id="future" class="max-w-7xl mx-auto px-4 py-8 md:py-12">
    <h2 class="text-xl md:text-2xl font-bold">Future</h2>
    <p class="mt-2 text-slate-300">
      A simple projection that shows when partner distributions resume under current margin and growth assumptions. 
      Change the assumptions to see the resume month move.
    </p>

    <div class="mt-4 grid md:grid-cols-4 gap-4">
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">Projected Sales Next 6 Months</div>
        <div class="text-2xl font-semibold" id="futureSales6">$0</div>
      </div>
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">Projected Profit Next 6 Months</div>
        <div class="text-2xl font-semibold" id="futureProfit6">$0</div>
      </div>
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">Projected Dist Pool in 6 Months</div>
        <div class="text-2xl font-semibold" id="futureDist6">$0</div>
      </div>
      <div class="rounded-xl bg-slate-900 border border-slate-800 p-4">
        <div class="text-xs text-slate-400">Projected Resume Month</div>
        <div class="text-2xl font-semibold" id="futureResume">TBD</div>
      </div>
    </div>

    <div class="mt-6 rounded-2xl bg-slate-900 border border-slate-800 p-4">
      <canvas id="futureChart" height="110"></canvas>
    </div>
  </section>

  <!-- Assumptions -->
  <section id="assumptions" class="max-w-7xl mx-auto px-4 py-8 md:py-12">
    <h2 class="text-xl md:text-2xl font-bold">Assumptions</h2>
    <p class="mt-2 text-slate-300">
      Tune these to match your current sheet. The model updates live.
    </p>
    <div class="mt-4 grid md:grid-cols-3 gap-4">
      <div class="rounded-2xl bg-slate-900 border border-slate-800 p-4">
        <label class="text-sm text-slate-300">Average Monthly Sales</label>
        <input id="inpAvgSales" type="number" class="mt-2 w-full bg-slate-800 border border-slate-700 rounded-xl px-3 py-2" value="140000" />
        <label class="mt-4 block text-sm text-slate-300">Profit Margin percent</label>
        <input id="inpMargin" type="number" class="mt-2 w-full bg-slate-800 border border-slate-700 rounded-xl px-3 py-2" value="9" />
      </div>
      <div class="rounded-2xl bg-slate-900 border border-slate-800 p-4">
        <label class="text-sm text-slate-300">Monthly Fixed Costs</label>
        <input id="inpFixed" type="number" class="mt-2 w-full bg-slate-800 border border-slate-700 rounded-xl px-3 py-2" value="68000" />
        <label class="mt-4 block text-sm text-slate-300">Target Cash Buffer months</label>
        <input id="inpBufferMonths" type="number" class="mt-2 w-full bg-slate-800 border border-slate-700 rounded-xl px-3 py-2" value="1.5" step="0.5" />
      </div>
      <div class="rounded-2xl bg-slate-900 border border-slate-800 p-4">
        <label class="text-sm text-slate-300">Monthly Growth percent</label>
        <input id="inpGrowth" type="number" class="mt-2 w-full bg-slate-800 border border-slate-700 rounded-xl px-3 py-2" value="2.5" />
        <label class="mt-4 block text-sm text-slate-300">Distribution percent of profit</label>
        <input id="inpDistPct" type="number" class="mt-2 w-full bg-slate-800 border border-slate-700 rounded-xl px-3 py-2" value="50" />
      </div>
    </div>
    <div class="mt-4 flex gap-3">
      <button id="btnRecalc" class="px-4 py-2 rounded-xl border border-slate-700 bg-slate-800 hover:bg-slate-700">
        Recalculate
      </button>
      <button id="btnReset" class="px-4 py-2 rounded-xl border border-slate-700 bg-slate-800 hover:bg-slate-700">
        Reset
      </button>
    </div>
  </section>

  <footer class="max-w-7xl mx-auto px-4 pb-10 text-xs text-slate-400">
    Built for a straight talk with partners. Swap placeholder arrays with your live exports when ready.
  </footer>

  <script>
    // -------- Placeholder data you can swap with real exports ----------
    // 12 months behind us
    const months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    const pastSales = [120000,125000,118000,130000,135000,138000,142000,145000,150000,148000,155000,160000];
    const pastExpenses = [108000,111000,106000,114000,118000,120000,124000,126000,129000,127000,132000,136500];
    const pastProfit   = pastSales.map((s,i)=>s - pastExpenses[i]);

    // This month pace
    let presentSalesPace = 152000;
    let presentExpensePace = 137000;

    // Defaults for assumptions
    const defaults = {
      avgSales: 140000,
      marginPct: 9,
      fixed: 68000,
      bufferMonths: 1.5,
      growthPct: 2.5,
      distPct: 50
    };

    // -------- Helpers ----------
    const $ = (id)=>document.getElementById(id);
    const fmt = (n)=> n.toLocaleString(undefined,{style:"currency",currency:"USD",maximumFractionDigits:0});
    const pct = (n)=> (Math.round(n*10)/10).toString() + "%";

    function readAssumptions(){
      return {
        avgSales: +$("inpAvgSales").value || defaults.avgSales,
        marginPct: +$("inpMargin").value || defaults.marginPct,
        fixed: +$("inpFixed").value || defaults.fixed,
        bufferMonths: +$("inpBufferMonths").value || defaults.bufferMonths,
        growthPct: +$("inpGrowth").value || defaults.growthPct,
        distPct: +$("inpDistPct").value || defaults.distPct
      };
    }

    function resetAssumptions(){
      $("inpAvgSales").value = defaults.avgSales;
      $("inpMargin").value = defaults.marginPct;
      $("inpFixed").value = defaults.fixed;
      $("inpBufferMonths").value = defaults.bufferMonths;
      $("inpGrowth").value = defaults.growthPct;
      $("inpDistPct").value = defaults.distPct;
    }

    // -------- Calculations ----------
    function calcKpis(){
      const asum = readAssumptions();

      // Past
      const lastYearSales = pastSales.reduce((a,b)=>a+b,0);
      const lastYearProfit = pastProfit.reduce((a,b)=>a+b,0);
      const lastYearMargin = lastYearProfit / lastYearSales;

      // YTD assume same as past arrays for demo
      const ytdSales = lastYearSales;
      const ytdProfit = lastYearProfit;

      // Ops hold equals one buffer of fixed costs
      const opsHold = asum.fixed * asum.bufferMonths;

      // Present
      const presentProfitPace = Math.max(0, presentSalesPace - presentExpensePace);
      const expenseRatio = presentExpensePace / presentSalesPace;

      // Breakeven given fixed and margin
      const margin = asum.marginPct / 100;
      const breakeven = asum.fixed / Math.max(0.0001, margin);

      // Future projection next 6 months
      let mSales = asum.avgSales;
      let growth = 1 + asum.growthPct/100;
      let sixSales = 0;
      let sixProfit = 0;
      let distPool = 0;
      let resumeMonth = "TBD";
      let monthIdxStart = new Date().getMonth();
      let projectedLine = [];

      for(let i=1;i<=12;i++){
        if(i<=6){ sixSales += mSales; }
        const profit = mSales * margin;
        if(i<=6){ sixProfit += profit; }
        // Distributions only when cash above opsHold
        // Simple model: pool is margin profit minus desire to rebuild buffer until full
        distPool += Math.max(0, profit);
        if(resumeMonth==="TBD" && distPool >= opsHold){
          // once buffer rebuilt, start distributions next month
          const idx = (monthIdxStart + i) % 12;
          resumeMonth = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][idx];
        }
        projectedLine.push(mSales);
        mSales *= growth;
      }

      // Planned distribution rate
      const distPct = asum.distPct/100;
      const projectedDist6 = Math.max(0, sixProfit - opsHold) * distPct;

      // Update text KPIs
      $("kpiYtdSales").textContent = fmt(ytdSales);
      $("kpiYtdProfit").textContent = fmt(ytdProfit);
      $("kpiDistPool").textContent = fmt(Math.max(0, ytdProfit - opsHold));
      $("kpiResumeMonth").textContent = resumeMonth;

      $("pastSalesTotal").textContent = fmt(lastYearSales);
      $("pastProfitTotal").textContent = fmt(lastYearProfit);
      $("pastMargin").textContent = pct(lastYearMargin*100);
      $("pastOpsHold").textContent = fmt(opsHold);

      $("presentSales").textContent = fmt(presentSalesPace);
      $("presentProfit").textContent = fmt(presentProfitPace);
      $("presentExpenseRatio").textContent = pct(expenseRatio*100);
      $("presentBreakeven").textContent = fmt(breakeven);

      $("futureSales6").textContent = fmt(sixSales);
      $("futureProfit6").textContent = fmt(sixProfit);
      $("futureDist6").textContent = fmt(Math.max(0, projectedDist6));
      $("futureResume").textContent = resumeMonth;

      // Status line
      $("statusBadge").textContent = presentProfitPace>0 ? "On path to resume with growth" : "Tight margin. Protect cost and sales mix";

      return { projectedLine };
    }

    // -------- Charts ----------
    let pastChart, presentChart, futureChart;

    function buildCharts(projectedLine){
      // Destroy if exist
      [pastChart,presentChart,futureChart].forEach(c=>{ if(c){ c.destroy(); } });

      // Past
      pastChart = new Chart(document.getElementById("pastChart"), {
        type: "line",
        data: {
          labels: months,
          datasets: [
            { label: "Sales", data: pastSales, borderWidth: 2, tension: .25 },
            { label: "Expenses", data: pastExpenses, borderWidth: 2, tension: .25 },
            { label: "Profit", data: pastProfit, borderWidth: 2, tension: .25 }
          ]
        },
        options: {
          plugins: { legend: { labels: { color: "#cbd5e1" } } },
          scales: {
            x: { ticks: { color: "#94a3b8" }, grid: { color: "#1f2937" } },
            y: { ticks: { color: "#94a3b8" }, grid: { color: "#1f2937" } }
          }
        }
      });

      // Present
      presentChart = new Chart(document.getElementById("presentChart"), {
        type: "bar",
        data: {
          labels: ["Sales pace","Expense pace","Profit pace"],
          datasets: [
            { label: "Current Month", data: [presentSalesPace, presentExpensePace, Math.max(0,presentSalesPace-presentExpensePace)] }
          ]
        },
        options: {
          plugins: { legend: { display: false } },
          scales: {
            x: { ticks: { color: "#94a3b8" }, grid: { color: "#1f2937" } },
            y: { ticks: { color: "#94a3b8" }, grid: { color: "#1f2937" } }
          }
        }
      });

      // Future
      const futMonths = Array.from({length:12},(_,i)=>{
        const idx = (new Date().getMonth()+i+1)%12;
        return ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][idx];
      });

      futureChart = new Chart(document.getElementById("futureChart"), {
        type: "line",
        data: {
          labels: futMonths,
          datasets: [
            { label: "Projected Sales", data: projectedLine, fill: true, borderWidth: 2, tension: .25 }
          ]
        },
        options: {
          plugins: { legend: { labels: { color: "#cbd5e1" } } },
          scales: {
            x: { ticks: { color: "#94a3b8" }, grid: { color: "#1f2937" } },
            y: { ticks: { color: "#94a3b8" }, grid: { color: "#1f2937" } }
          }
        }
      });
    }

    function recalc(){
      const { projectedLine } = calcKpis();
      buildCharts(projectedLine);
    }

    // Wire buttons
    $("btnRecalc").addEventListener("click", recalc);
    $("btnReset").addEventListener("click", ()=>{ resetAssumptions(); recalc(); });

    // First render
    recalc();
  </script>
</body>
</html>
